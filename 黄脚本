local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/HXB20111/roblox-/refs/heads/main/gui_modified_with_toggle.txt"))()
local Window = OrionLib:MakeWindow({
    Name = "黄脚本",
    SaveConfig = true,
    IntroText = "黄脚本 - 功能加载完成",
    Theme = "FlatBlue",
    Icon = "rbxassetid://118894209472715"
})

-- 欢迎通知
pcall(function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "黄脚本",
        Text = "欢迎使用，功能已就绪",
        Duration = 4,
        Icon = "rbxassetid://118894209472715"
    })
end)

-- 辅助函数：处理脚本加载
local function loadRemoteScript(url)
    local success, httpResult = pcall(game.HttpGet, game, url)
    if not success then
        OrionLib:MakeNotification({
            Name = "加载失败",
            Content = "网络请求失败: ".. tostring(httpResult),
            Time = 3
        })
        warn("脚本网络请求失败: ".. tostring(httpResult))
        return nil
    end
    local loadSuccess, loadFunc = pcall(loadstring, httpResult)
    if not loadSuccess then
        OrionLib:MakeNotification({
            Name = "加载失败",
            Content = "脚本加载失败: ".. tostring(loadFunc),
            Time = 3
        })
        warn("脚本加载失败: ".. tostring(loadFunc))
        return nil
    end
    return loadFunc
end

local Tab = Window:MakeTab({
    Name = "玩家功能",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

Tab:AddTextbox({
    Name = "跳跃高度",
    Default = "",
    TextDisappear = true,
    Callback = function(Value)
        local num = tonumber(Value)
        if num then
            game.Players.LocalPlayer.Character.Humanoid.JumpPower = num
        end
    end
})

Tab:AddTextbox({
    Name = "移动速度",
    Default = "",
    TextDisappear = true,
    Callback = function(Value)
        local num = tonumber(Value)
        if num then
            game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = num
        end
    end
})

Tab:AddTextbox({
    Name = "重力",
    Default = "",
    TextDisappear = true,
    Callback = function(Value)
        local num = tonumber(Value)
        if num then
            game.Workspace.Gravity = num
        end
    end
})

Tab:AddToggle({
    Name = "夜视",
    Default = false,
    Callback = function(Value)
        game.Lighting.Ambient = Value and Color3.new(1, 1, 1) or Color3.new(0, 0, 0)
    end
})

Tab:AddToggle({
    Name = "飞行",
    Default = false,
    Callback = function(Value)
        if Value then
            local loadFunc = loadRemoteScript("https://raw.githubusercontent.com/HXB20111/roblox-/refs/heads/main/%E9%BB%84%E9%A3%9E%E8%A1%8C")
            if loadFunc then
                local executeSuccess, executeResult = pcall(loadFunc)
                if not executeSuccess then
                    OrionLib:MakeNotification({
                        Name = "飞行功能失败",
                        Content = "脚本执行失败: ".. tostring(executeResult),
                        Time = 3
                    })
                    warn("飞行功能脚本执行失败: ".. tostring(executeResult))
                end
            end
        end
    end
})

-- 穿墙模式
local Clipon = false
local Stepped
local spinVelocity

Tab:AddToggle({
    Name = "穿墙",
    Default = false,
    Callback = function(enabled)
        Clipon = enabled
        local Workspace = game:GetService("Workspace")
        local Players = game:GetService("Players")

        -- 断开已有连接
        if Stepped then
            Stepped:Disconnect()
        end

        if enabled then
            -- 开启穿墙：禁用角色碰撞
            Stepped = game:GetService("RunService").Stepped:Connect(function()
                if Clipon then
                    local playerChar = Workspace:FindFirstChild(Players.LocalPlayer.Name)
                    if playerChar then
                        for _, part in pairs(playerChar:GetChildren()) do
                            if part:IsA("BasePart") then
                                part.CanCollide = false
                            end
                        end
                    end
                else
                    Stepped:Disconnect()
                end
            end)
            OrionLib:MakeNotification({Name = "成功", Content = "穿墙模式已开启", Time = 2})
        else
            -- 关闭穿墙：恢复碰撞
            local playerChar = Workspace:FindFirstChild(Players.LocalPlayer.Name)
            if playerChar then
                for _, part in pairs(playerChar:GetChildren()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = true
                    end
                end
            end
            OrionLib:MakeNotification({Name = "提示", Content = "穿墙模式已关闭", Time = 2})
        end
    end,
    Color = Color3.fromRGB(100, 149, 237)
})

Tab:AddToggle({
    Name = "旋转速度",
    Placeholder = "输入旋转速度值",
    Callback = function(Value)
        local speed = tonumber(Value)
        if not speed then
            return OrionLib:MakeNotification({
                Name = "错误",
                Content = "请输入有效的数字",
                Time = 2
            })
        end

        local plr = game:GetService("Players").LocalPlayer
        repeat task.wait() until plr.Character
        local humRoot = plr.Character:WaitForChild("HumanoidRootPart")
        local humanoid = plr.Character:WaitForChild("Humanoid")
        humanoid.AutoRotate = false

        if not spinVelocity then
            spinVelocity = Instance.new("AngularVelocity")
            spinVelocity.Attachment0 = humRoot:WaitForChild("RootAttachment")
            spinVelocity.MaxTorque = math.huge
            spinVelocity.AngularVelocity = Vector3.new(0, speed, 0)
            spinVelocity.Parent = humRoot
            spinVelocity.Name = "Spinbot"
        else
            spinVelocity.AngularVelocity = Vector3.new(0, speed, 0)
        end

        OrionLib:MakeNotification({
            Name = "已设置",
            Content = "旋转速度已调整为: ".. speed,
            Time = 1.5
        })
    end
})

-- 停止旋转按钮
Tab:AddToggle({
    Name = "停止旋转",
    Callback = function()
        local plr = game:GetService("Players").LocalPlayer
        repeat task.wait() until plr.Character
        local humRoot = plr.Character:WaitForChild("HumanoidRootPart")
        local humanoid = plr.Character:WaitForChild("Humanoid")

        local spinbot = humRoot:FindFirstChild("Spinbot")
        if spinbot then
            spinbot:Destroy()
            spinVelocity = nil
            humanoid.AutoRotate = true
            OrionLib:MakeNotification({
                Name = "已停止",
                Content = "旋转已停止",
                Time = 1.5
            })
        else
            OrionLib:MakeNotification({
                Name = "提示",
                Content = "未处于旋转状态",
                Time = 1.5
            })
        end
    end,
    Color = Color3.fromRGB(255, 99, 71)
})

Tab:AddToggle({
    Name = "踏空",
    Default = false,
    Callback = function(Value)
        if Value then
            local loadFunc = loadRemoteScript('https://raw.githubusercontent.com/GhostPlayer352/Test4/main/Float')
            if loadFunc then
                local executeSuccess, executeResult = pcall(loadFunc)
                if not executeSuccess then
                    OrionLib:MakeNotification({
                        Name = "踏空功能失败",
                        Content = "脚本执行失败: ".. tostring(executeResult),
                        Time = 3
                    })
                    warn("踏空功能脚本执行失败: ".. tostring(executeResult))
                end
            end
        end
    end
})

Tab:AddButton({
    Name = "自瞄",
    Callback = function()
        local loadFunc = loadRemoteScript("https://raw.githubusercontent.com/AZYsGithub/chillz-workshop/main/Arceus%20Aimbot.lua")
        if loadFunc then
            local executeSuccess, executeResult = pcall(loadFunc)
            if not executeSuccess then
                OrionLib:MakeNotification({
                    Name = "自瞄功能失败",
                    Content = "脚本执行失败: ".. tostring(executeResult),
                    Time = 3
                })
                warn("自瞄功能脚本执行失败: ".. tostring(executeResult))
            end
        end
    end
})

Tab:AddButton({
    Name = "透视",
    Callback = function()
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local LP = Players.LocalPlayer
        local Teams = game:GetService("Teams")

        local function IsGunGame()
            return #Teams:GetTeams() >= 2
        end

        local function IsEnemy(plr)
            if not IsGunGame() then return false end
            if not plr.Team or not LP.Team then return false end
            return plr.Team ~= LP.Team
        end

        local function GetHighlightColor(plr)
            if not IsGunGame() then
                return Color3.fromRGB(255, 255, 255)
            elseif IsEnemy(plr) then
                return Color3.fromRGB(180, 0, 0)
            else
                return Color3.fromRGB(0, 150, 255)
            end
        end

        local function CreateHighlight(target, color)
            local h = Instance.new("Highlight")
            h.Name = "StyledHighlight"
            h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            h.FillColor = color
            h.FillTransparency = 0.75
            h.OutlineColor = color
            h.OutlineTransparency = 0.3
            h.Adornee = target
            h.Parent = target
        end

        local function SetupVisuals(plr)
            if not plr.Character or plr == LP then return end
            local char = plr.Character
            if char:FindFirstChild("StyledHighlight") then return end

            local color = GetHighlightColor(plr)
            CreateHighlight(char, color)
        end

        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LP then
                SetupVisuals(plr)
            end
        end

        Players.PlayerAdded:Connect(function(plr)
            if plr == LP then return end
            plr.CharacterAdded:Connect(function()
                task.wait(0.2)
                SetupVisuals(plr)
            end)
        end)

        LP.CharacterAdded:Connect(function(myChar)
            local h = myChar:FindFirstChild("StyledHighlight")
            if h then h:Destroy() end
        end)
    end
})

Tab:AddButton({
    Name = "关闭透视",
    Callback = function()
        for _, plr in pairs(game:GetService("Players"):GetPlayers()) do
            if plr.Character and plr.Character:FindFirstChild("StyledHighlight") then
                plr.Character.StyledHighlight:Destroy()
            end
        end
    end
})

-- 作者信息标签页
local AuthorTab = Window:MakeTab({
    Name = "作者信息",
    Icon = "rbxassetid://4483345998"
})

AuthorTab:AddParagraph("作者", "Hfh916")
AuthorTab:AddParagraph("作者QQ", "135737738")
AuthorTab:AddParagraph("QQ群", "110")

AuthorTab:AddButton({
    Name = "复制作者QQ",
    Callback = function()
        if setclipboard then
            setclipboard("1357377308")
            OrionLib:MakeNotification({Name = "成功", Content = "QQ已复制", Time = 2})
        end
    end,
    Color = Color3.fromRGB(70, 130, 255)
})

AuthorTab:AddButton({
    Name = "复制QQ群",
    Callback = function()
        if setclipboard then
            setclipboard("110")
            OrionLib:MakeNotification({Name = "成功", Content = "QQ群已复制", Time = 2})
        end
    end,
    Color = Color3.fromRGB(100, 200, 100)
})

-- 墨水游戏 Tab
local InkGameTab = Window:MakeTab({
    Name = "开发者",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

InkGameTab:AddButton({
    Name = "dex",
    Callback = function()
        local loadFunc = loadRemoteScript("https://raw.githubusercontent.com/Focuslol666/RbxScripts/refs/heads/main/Other/DexPlusPlus%20(ZH-CN).lua")
        if loadFunc then
            local executeSuccess, executeResult = pcall(loadFunc)
            if not executeSuccess then
                OrionLib:MakeNotification({
                    Name = "dex加载失败",
                    Content = "脚本执行失败: ".. tostring(executeResult),
                    Time = 3
                })
                warn("dex加载脚本执行失败: ".. tostring(executeResult))
            end
        end
    end
})

InkGameTab:AddButton({
    Name = "IY",
    Callback = function()
        local loadFunc = loadRemoteScript('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source')
        if loadFunc then
            local executeSuccess, executeResult = pcall(loadFunc)
            if not executeSuccess then
                OrionLib:MakeNotification({
                    Name = "IY加载失败",
                    Content = "脚本执行失败: ".. tostring(executeResult),
                    Time = 3
                })
                warn("IY加载脚本执行失败: ".. tostring(executeResult))
            end
        end
    end
})

local ScriptCenterTab = Window:MakeTab({
    Name = "其他脚本",
    Icon = "rbxassetid://4483345998"
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "加载皮脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载...", Time = 3})
        task.spawn(function()
            getgenv().XiaoPi = "皮脚本QQ群1002100032"
            loadRemoteScript("https://raw.githubusercontent.com/xiaopi77/xiaopi77/main/QQ1002100032 - Roblox - Pi - script.lua",
                             "皮脚本加载完成",
                             "皮脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(123, 104, 238)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "安脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载安脚本...", Time = 3})
        task.spawn(function()
            loadRemoteScript('https://raw.githubusercontent.com/wucan114514/gegeyxjb/refs/heads/main/%E5%AE%89%E8%84%9A%E6%9C%AC.lua',
                             "安脚本加载完成",
                             "安脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(255, 99, 71)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "落叶脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载落叶脚本...", Time = 3})
        task.spawn(function()
            getgenv().LS = "落叶脚本"
            loadRemoteScript("https://raw.githubusercontent.com/krlpl/Deciduous - center - LS/main/%E8%90%BD%E5%8F%B6%E4%B8%AD%E5%BF%83%E6%B7%B7%E6%B7%86.txt",
                             "落叶脚本加载完成",
                             "落叶脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(139, 69, 19)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "霖溺脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载霖溺 - 免费版加载器...", Time = 3})
        task.spawn(function()
            loadRemoteScript("https://raw.githubusercontent.com/ShenJiaoBen/ScriptLoader/refs/heads/main/Linni_FreeLoader.lua",
                             "霖溺 - 免费版加载器加载完成",
                             "霖溺 - 免费版加载器加载失败")
        end)
    end,
    Color = Color3.fromRGB(70, 200, 200)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "叶脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载叶脚本...", Time = 3})
        task.spawn(function()
            loadRemoteScript("https://raw.githubusercontent.com/roblox - ye/QQ515966991/refs/heads/main/ROBLOX - CNVIP - XIAOYE.lua",
                             "叶脚本加载完成",
                             "叶脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(123, 200, 91)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "刹脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载刹脚本...", Time = 3})
        task.spawn(function()
            SHA_SCRIPT = "殺脚本"
            loadRemoteScript("https://raw.githubusercontent.com/FengYu - 3/FengYu/refs/heads/main/shascript.lua",
                             "刹脚本加载完成",
                             "刹脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(200, 70, 70)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "泷脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载泷脚本...", Time = 3})
        task.spawn(function()
            loadRemoteScript("https://raw.githubusercontent.com/2012long/long/refs/heads/main/%E6%B3%B7%E6%AD%BB%E9%93%81.lua",
                             "泷脚本加载完成",
                             "泷脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(105, 105, 105)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "汉化脚本--卡密:",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载汉化脚本...", Time = 3})
        task.spawn(function()
            loadRemoteScript('https://raw.githubusercontent.com/S - WTB/-/refs/heads/main/ISIS加载器',
                             "汉化脚本加载完成",
                             "汉化脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(255, 78, 91)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "RB脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载RB脚本...", Time = 3})
        task.spawn(function()
            loadRemoteScript("https://raw.githubusercontent.com/Yungengxin/roblox/refs/heads/main/Rb - Hub",
                             "RB脚本加载完成",
                             "RB脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(255, 78, 91)
})

OrionLib:AddButton(ScriptCenterTab, {
    Name = "TX脚本",
    Callback = function()
        OrionLib:MakeNotification({Name = "提示", Content = "正在加载TX脚本...", Time = 3})
        task.spawn(function()
            loadRemoteScript("https://raw.githubusercontent.com/JsYb666/TX - Free - YYDS/refs/heads/main/FREE - TX - TEAM",
                             "TX脚本加载完成",
                             "TX脚本加载失败")
        end)
    end,
    Color = Color3.fromRGB(255, 91, 78)
})

-- 初始化界面
OrionLib:Init()
